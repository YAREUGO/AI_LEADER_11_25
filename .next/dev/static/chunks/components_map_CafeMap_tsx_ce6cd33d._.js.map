{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/AI%20LEADER_coding%20play/ai_leader_11_25/components/map/CafeMap.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport { Cafe } from '@/lib/types';\r\nimport { cn } from '@/lib/utils';\r\n\r\n// Leaflet 마커 아이콘 설정 (SSR 이슈 해결)\r\nconst createCustomIcon = (score: number) => {\r\n  const color = score >= 8 ? '#22c55e' : score >= 5 ? '#eab308' : '#ef4444';\r\n  \r\n  return L.divIcon({\r\n    className: 'custom-marker',\r\n    html: `\r\n      <div style=\"\r\n        background-color: ${color};\r\n        width: 48px;\r\n        height: 48px;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        color: white;\r\n        font-weight: bold;\r\n        font-size: 14px;\r\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\r\n        border: 3px solid white;\r\n      \">\r\n        ${score.toFixed(1)}\r\n      </div>\r\n    `,\r\n    iconSize: [48, 48],\r\n    iconAnchor: [24, 24],\r\n  });\r\n};\r\n\r\ninterface CafeMapProps {\r\n  cafes: Cafe[];\r\n  selectedCafe: Cafe | null;\r\n  onCafeClick: (cafe: Cafe) => void;\r\n  filters: {\r\n    powerRequired: boolean;\r\n    openLate: boolean;\r\n  };\r\n}\r\n\r\nfunction MapController({ center }: { center: [number, number] }) {\r\n  const map = useMap();\r\n  \r\n  useEffect(() => {\r\n    map.setView(center, 15);\r\n  }, [map, center]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default function CafeMap({ cafes, selectedCafe, onCafeClick, filters }: CafeMapProps) {\r\n  // 필터링된 카페 목록\r\n  const filteredCafes = cafes.filter((cafe) => {\r\n    if (filters.powerRequired && cafe.specs.power === 'Low') return false;\r\n    if (filters.openLate && !cafe.isOpenLate) return false;\r\n    return true;\r\n  });\r\n\r\n  // 망원동 중심 좌표\r\n  const center: [number, number] = [37.5563, 126.9054];\r\n\r\n  return (\r\n    <div className=\"w-full h-full relative\">\r\n      <MapContainer\r\n        center={center}\r\n        zoom={15}\r\n        style={{ height: '100%', width: '100%', zIndex: 0 }}\r\n      >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        <MapController center={center} />\r\n        {filteredCafes.map((cafe) => (\r\n          <Marker\r\n            key={cafe.id}\r\n            position={[cafe.location.lat, cafe.location.lng]}\r\n            icon={createCustomIcon(cafe.wsiScore)}\r\n            eventHandlers={{\r\n              click: () => {\r\n                onCafeClick(cafe);\r\n              },\r\n            }}\r\n          >\r\n            <Popup>\r\n              <div className=\"text-sm font-semibold\">{cafe.name}</div>\r\n              <div className=\"text-xs text-gray-600\">WSI: {cafe.wsiScore.toFixed(1)}</div>\r\n            </Popup>\r\n          </Marker>\r\n        ))}\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAJA;;;;AAQA,gCAAgC;AAChC,MAAM,mBAAmB,CAAC;IACxB,MAAM,QAAQ,SAAS,IAAI,YAAY,SAAS,IAAI,YAAY;IAEhE,OAAO,mNAAC,CAAC,OAAO,CAAC;QACf,WAAW;QACX,MAAM,CAAC;;0BAEe,EAAE,MAAM;;;;;;;;;;;;;QAa1B,EAAE,MAAM,OAAO,CAAC,GAAG;;IAEvB,CAAC;QACD,UAAU;YAAC;YAAI;SAAG;QAClB,YAAY;YAAC;YAAI;SAAG;IACtB;AACF;AAYA,SAAS,cAAc,EAAE,MAAM,EAAgC;;IAC7D,MAAM,MAAM,IAAA,mQAAM;IAElB,IAAA,ySAAS;mCAAC;YACR,IAAI,OAAO,CAAC,QAAQ;QACtB;kCAAG;QAAC;QAAK;KAAO;IAEhB,OAAO;AACT;GARS;;QACK,mQAAM;;;KADX;AAUM,SAAS,QAAQ,EAAE,KAAK,EAAE,YAAY,EAAE,WAAW,EAAE,OAAO,EAAgB;IACzF,aAAa;IACb,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAC;QAClC,IAAI,QAAQ,aAAa,IAAI,KAAK,KAAK,CAAC,KAAK,KAAK,OAAO,OAAO;QAChE,IAAI,QAAQ,QAAQ,IAAI,CAAC,KAAK,UAAU,EAAE,OAAO;QACjD,OAAO;IACT;IAEA,YAAY;IACZ,MAAM,SAA2B;QAAC;QAAS;KAAS;IAEpD,qBACE,4TAAC;QAAI,WAAU;kBACb,cAAA,4TAAC,gRAAY;YACX,QAAQ;YACR,MAAM;YACN,OAAO;gBAAE,QAAQ;gBAAQ,OAAO;gBAAQ,QAAQ;YAAE;;8BAElD,4TAAC,0QAAS;oBACR,aAAY;oBACZ,KAAI;;;;;;8BAEN,4TAAC;oBAAc,QAAQ;;;;;;gBACtB,cAAc,GAAG,CAAC,CAAC,qBAClB,4TAAC,oQAAM;wBAEL,UAAU;4BAAC,KAAK,QAAQ,CAAC,GAAG;4BAAE,KAAK,QAAQ,CAAC,GAAG;yBAAC;wBAChD,MAAM,iBAAiB,KAAK,QAAQ;wBACpC,eAAe;4BACb,OAAO;gCACL,YAAY;4BACd;wBACF;kCAEA,cAAA,4TAAC,kQAAK;;8CACJ,4TAAC;oCAAI,WAAU;8CAAyB,KAAK,IAAI;;;;;;8CACjD,4TAAC;oCAAI,WAAU;;wCAAwB;wCAAM,KAAK,QAAQ,CAAC,OAAO,CAAC;;;;;;;;;;;;;uBAXhE,KAAK,EAAE;;;;;;;;;;;;;;;;AAkBxB;MA3CwB"}}]
}